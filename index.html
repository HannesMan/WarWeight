<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>War Weight Builder Upgrades</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="light-mode">

<header>
  <h1>War Weight Builder Upgrades</h1>
  <button id="theme-toggle" aria-pressed="false" aria-label="Toggle dark/light theme">Toggle Dark/Light</button>
  <button id="help-btn" aria-haspopup="dialog" aria-expanded="false" aria-controls="help-modal">Help</button>
  <button id="tip-btn" aria-haspopup="dialog" aria-expanded="false" aria-controls="tip-modal">€ - Tip</button>
</header>

<main>
  <section class="selector-section">
    <label for="th-select">Select Town Hall Level:</label>
    <select id="th-select" aria-label="Select Town Hall Level">
      <option value="">-- Select --</option>
      <!-- Populated dynamically in scripts -->
    </select>
  </section>

  <section id="buildings-container" aria-live="polite" aria-relevant="additions">
    <!-- Building checkboxes populated dynamically -->
  </section>

  <button id="calculate-btn" disabled aria-disabled="true">Calculate Next Upgrades</button>

  <section id="updates-container" aria-live="polite" aria-atomic="true" role="region" aria-label="Next Upgrades">
    <!-- Displays next upgrade suggestions -->
  </section>
</main>

<footer>
  <small>© 2025 War Weight Builder | Made by Hannes Man / BLITZKRIEG FWA</small>
</footer>

<!-- Help Modal -->
<div id="help-modal" role="dialog" aria-modal="true" aria-labelledby="help-title" aria-hidden="true" class="modal hidden">
  <div class="modal-content" tabindex="-1">
    <h2 id="help-title">Help</h2>
    <div id="help-content">
      <!-- Help content loaded dynamically -->
    </div>
    <button id="help-close-btn" aria-label="Close help">Close</button>
  </div>
</div>

<!-- Tip Modal -->
<div id="tip-modal" role="dialog" aria-modal="true" aria-labelledby="tip-title" aria-hidden="true" class="modal hidden">
  <div class="modal-content" tabindex="-1">
    <h2 id="tip-title">Tip</h2>
    <div id="tip-content">
      This site is completely free to use. If you want to support the work, you can tip <a href="https://streamelements.com/hannes_man/tip" target="_blank" rel="noopener noreferrer">here</a>. Thank you!
    </div>
    <button id="tip-close-btn" aria-label="Close tip">Close</button>
  </div>
</div>

<!-- Scripts loading order -->
<script src="data/helpContent.js"></script>       <!-- Help content -->
<script src="scripts/generalScript.js"></script>  <!-- UI logic, populateTHOptions() -->
<script src="scripts/wwScript.js"></script>       <!-- Data loading and calculations -->
<script src="scripts/feedback.js"></script>

<!-- Import Calculates.js as a module -->
<script type="module">
  import { setupCalculateButton } from './scripts/calculates.js';
  setupCalculateButton();
</script>

</body>
</html>
